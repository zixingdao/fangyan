经过对架构的全面审查，我发现当前系统在**后端安全性**、**接口规范性**和**开发体验**上存在几个关键缺陷。

以下是详细的完善计划，旨在修复这些"突兀"和"不合理"之处：

### 1. 核心架构缺陷与修复方案

#### 🔴 严重：后端缺乏运行时验证 (Missing Validation)
*   **问题**: `apps/server` 直接使用了 `packages/shared` 中的 TypeScript 类型（如 `LoginDto`）。由于 TypeScript 接口在运行时会被擦除，**NestJS 实际上没有对请求参数进行任何校验**。非法数据可以直接穿透到数据库。
*   **方案**: 引入 `nestjs-zod`。在 Server 端创建具体的 DTO 类（继承自 Shared 的 Zod Schema），并启用全局 `ZodValidationPipe`。这将实现前后端共用一套校验逻辑，且确保后端安全。

#### 🟠 重要：API 响应格式不统一 (Inconsistent Responses)
*   **问题**: 后端 Controller 直接返回数据（如 User 对象），缺乏统一的信封结构（如 `{ code: 200, data: ..., msg: 'success' }`）。这导致前端 Axios 拦截器处理逻辑脆弱。
*   **方案**:
    *   实现全局 **Response Interceptor**：统一包装成功响应。
    *   实现全局 **Exception Filter**：统一包装错误响应（将 HTTP 异常转换为标准错误格式）。

#### 🟡 建议：缺乏 API 文档 (No Documentation)
*   **问题**: 目前没有 API 文档，前后端对接靠口头约定或查代码。
*   **方案**: 集成 **Swagger (OpenAPI)**，利用 `nestjs-zod` 自动从代码生成接口文档。

### 2. 执行步骤

#### 第一阶段：基础设施升级 (Infrastructure)
1.  **依赖安装**: 在 `apps/server` 安装 `nestjs-zod`, `@nestjs/swagger`, `swagger-ui-express`。
2.  **全局配置**: 修改 `main.ts`，注册全局 Pipe, Interceptor, Filter 和 Swagger。

#### 第二阶段：代码重构 (Refactoring)
3.  **创建 DTO 类**: 在 Server 端各模块下创建 `dto` 文件，使用 `createZodDto` 包装 Shared 中的 Schema。
    *   例如：`class LoginDto extends createZodDto(LoginSchema) {}`
4.  **更新 Controller**: 将 Controller 中的参数类型替换为新的 DTO 类。
5.  **统一响应**: 创建并应用 `TransformInterceptor` 和 `HttpExceptionFilter`。

#### 第三阶段：前端适配 (Frontend)
6.  **Axios 升级**: 更新 Client 和 Admin 的 `axios.ts`，适配新的 `{ code, data, msg }` 响应结构。

这个计划将把项目从一个"原型"提升为一个"生产级"的 Monorepo 架构，确保类型安全和接口规范。
